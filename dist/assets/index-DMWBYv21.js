var F=(r,i,e)=>{if(!i.has(r))throw TypeError("Cannot "+e)};var o=(r,i,e)=>(F(r,i,"read from private field"),e?e.call(r):i.get(r)),y=(r,i,e)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,e)},g=(r,i,e,n)=>(F(r,i,"write to private field"),n?n.call(r,e):i.set(r,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&n(t)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var M={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(r){(function(i,e){r.exports?r.exports=e():i.Toastify=e()})(W,function(i){var e=function(t){return new e.lib.init(t)},n="1.12.0";e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:n,constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||e.defaults.text,this.options.node=t.node||e.defaults.node,this.options.duration=t.duration===0?0:t.duration||e.defaults.duration,this.options.selector=t.selector||e.defaults.selector,this.options.callback=t.callback||e.defaults.callback,this.options.destination=t.destination||e.defaults.destination,this.options.newWindow=t.newWindow||e.defaults.newWindow,this.options.close=t.close||e.defaults.close,this.options.gravity=t.gravity==="bottom"?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=t.positionLeft||e.defaults.positionLeft,this.options.position=t.position||e.defaults.position,this.options.backgroundColor=t.backgroundColor||e.defaults.backgroundColor,this.options.avatar=t.avatar||e.defaults.avatar,this.options.className=t.className||e.defaults.className,this.options.stopOnFocus=t.stopOnFocus===void 0?e.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||e.defaults.onClick,this.options.offset=t.offset||e.defaults.offset,this.options.escapeMarkup=t.escapeMarkup!==void 0?t.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||e.defaults.ariaLive,this.options.style=t.style||e.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var u in this.options.style)t.style[u]=this.options.style[u];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,this.options.avatar!==""){var b=document.createElement("img");b.src=this.options.avatar,b.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?t.appendChild(b):t.insertAdjacentElement("afterbegin",b)}if(this.options.close===!0){var c=document.createElement("button");c.type="button",c.setAttribute("aria-label","Close"),c.className="toast-close",c.innerHTML="&#10006;",c.addEventListener("click",(function(C){C.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var d=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&d>360?t.insertAdjacentElement("afterbegin",c):t.appendChild(c)}if(this.options.stopOnFocus&&this.options.duration>0){var p=this;t.addEventListener("mouseover",function(C){window.clearTimeout(t.timeOutValue)}),t.addEventListener("mouseleave",function(){t.timeOutValue=window.setTimeout(function(){p.removeElement(t)},p.options.duration)})}if(typeof this.options.destination<"u"&&t.addEventListener("click",(function(C){C.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&t.addEventListener("click",(function(C){C.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var v=a("x",this.options),w=a("y",this.options),x=this.options.position=="left"?v:"-"+v,S=this.options.gravity=="toastify-top"?w:"-"+w;t.style.transform="translate("+x+","+S+")"}return t},showToast:function(){this.toastElement=this.buildToast();var t;if(typeof this.options.selector=="string"?t=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?t=this.options.selector:t=document.body,!t)throw"Root element is not defined";var u=e.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,u),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}).bind(this),400)}},e.reposition=function(){for(var t={top:15,bottom:15},u={top:15,bottom:15},b={top:15,bottom:15},c=document.getElementsByClassName("toastify"),d,p=0;p<c.length;p++){s(c[p],"toastify-top")===!0?d="toastify-top":d="toastify-bottom";var v=c[p].offsetHeight;d=d.substr(9,d.length-1);var w=15,x=window.innerWidth>0?window.innerWidth:screen.width;x<=360?(c[p].style[d]=b[d]+"px",b[d]+=v+w):s(c[p],"toastify-left")===!0?(c[p].style[d]=t[d]+"px",t[d]+=v+w):(c[p].style[d]=u[d]+"px",u[d]+=v+w)}return this};function a(t,u){return u.offset[t]?isNaN(u.offset[t])?u.offset[t]:u.offset[t]+"px":"0px"}function s(t,u){return!t||typeof u!="string"?!1:!!(t.className&&t.className.trim().split(/\s+/gi).indexOf(u)>-1)}return e.lib.init.prototype=e.lib,e})})(M);var B=M.exports;const O=A(B);var E,k;class D{constructor(i="marcador"){y(this,E,void 0);y(this,k,[{name:"X",puntos:0},{name:"O",puntos:0}]);g(this,E,i),this.imprimir()}addPuntos(i){let e=o(this,k).find(n=>n.name===i);e.puntos++,this.imprimir()}imprimir(){let i=document.getElementById(o(this,E)),e=document.createElement("ul");o(this,k).forEach(n=>{let a=document.createElement("li");a.textContent=`Jugador ${n.name} tiene ${n.puntos} puntos`,e.append(a)}),i.innerHTML="",i.append(e)}}E=new WeakMap,k=new WeakMap;var f,l,h,T,N;class j{constructor(i=3){y(this,f,void 0);y(this,l,void 0);y(this,h,void 0);y(this,T,void 0);y(this,N,void 0);g(this,f,new Array),g(this,l,i);for(let e=0;e<o(this,l);e++){o(this,f)[e]=new Array;for(let n=0;n<o(this,l);n++)o(this,f)[e][n]=null}g(this,h,"X"),g(this,N,new D)}imprimir(i="tablero"){let e=document.getElementById(i);g(this,T,i),e.innerHTML="";for(let n=0;n<o(this,l);n++)for(let a=0;a<o(this,l);a++){let s=document.createElement("div");s.dataset.fila=n,s.dataset.columna=a,s.dataset.libre="",o(this,f)[n][a]&&(s.textContent(o(this,f)[n][a]),s.dataset.libre=o(this,f)[n][a]),e.appendChild(s),this.addEventClick(s)}e.style.gridTemplateColumns=`repeat(${o(this,l)}, 1fr)`}isFree(i,e){return o(this,f)[i][e]===null}setCasilla(i,e,n){return this.isFree(i,e)?(o(this,f)[i][e]=n,!0):!1}getCasilla(i,e){return o(this,f)[i][e]}toogleTurno(){o(this,h)==="X"?g(this,h,"O"):g(this,h,"X")}comprobarResultados(){let i,e,n=!1;for(i=0;i<o(this,l)&&!n;i++){let s=0;for(e=0;e<o(this,l);e++)e!==0&&this.getCasilla(i,e)===this.getCasilla(i,e-1)&&this.getCasilla(i,e)!==null&&s++;s===o(this,l)-1&&(console.log("Linea"),n=!0)}for(e=0;e<o(this,l)&&!n;e++){let s=0;for(i=0;i<o(this,l);i++)i!==0&&this.getCasilla(i,e)===this.getCasilla(i-1,e)&&this.getCasilla(i,e)!==null&&s++;s===o(this,l)-1&&(console.log("Columna"),n=!0)}let a=0;for(let s=0;s<o(this,l);s++)s!==0&&this.getCasilla(s,s)===this.getCasilla(s-1,s-1)&&this.getCasilla(s,s)!==null&&a++;a===o(this,l)-1&&(console.log("Diagonal de izq a derecha"),n=!0),a=0;for(let s=o(this,l)-1;s>=0;s--)if(s!==o(this,l)-1){let t=o(this,l)-1-s;this.getCasilla(s,t)===this.getCasilla(s+1,t-1)&&this.getCasilla(s,t)!==null&&a++}a===o(this,l)-1&&(console.log("Diagonal de derecha a izquierda"),n=!0),n?(O({text:`Ha ganado el jugador ${o(this,h)}`,newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelectorAll('div[data-libre=""]').forEach(t=>{t.dataset.libre="-"}),o(this,N).addPuntos(o(this,h)),document.querySelector(".clearGame").classList.toggle("show")):this.isFull()&&O({text:"Han sido tablas",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast()}isFull(){return!o(this,f).some(i=>i.some(e=>e===null))}addEventClick(i){i.addEventListener("click",e=>{let n=e.currentTarget;n.dataset.libre===""&&(n.textContent=o(this,h),this.setCasilla(n.dataset.fila,n.dataset.columna,o(this,h)),n.dataset.libre=o(this,h),this.comprobarResultados(),this.toogleTurno())})}get dimension(){return o(this,l)}get elementID(){return o(this,T)}limpiar(){g(this,f,o(this,f).map(i=>i.map(e=>null))),this.imprimir(),document.querySelector(".clearGame").classList.toggle("show")}}f=new WeakMap,l=new WeakMap,h=new WeakMap,T=new WeakMap,N=new WeakMap;const q=document.getElementById("createTable"),m=document.getElementById("dimension"),G=document.getElementById("resetGame"),H=document.querySelectorAll(".clearGameButton"),I=document.querySelector(".preGame"),P=document.querySelector(".inGame");let L;q.addEventListener("click",r=>{if(!m.value)return O({text:"Debe indicar una dimensión válida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),m.classList.add("error"),m.focus(),!1;if(isNaN(m.value))return O({text:"Debe introducir un número válido",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),m.classList.add("error"),m.focus(),!1;L=new j(parseInt(m.value)),L.imprimir("tablero"),I.classList.toggle("hide"),P.classList.toggle("hide")});m.addEventListener("keydown",()=>{m.classList.remove("error")});for(let r of H)r.addEventListener("click",()=>{L.limpiar()});G.addEventListener("click",r=>{document.getElementById(L.elementID).innerHTML="",L=null,I.classList.toggle("hide"),P.classList.toggle("hide"),m.value="",m.focus()});
